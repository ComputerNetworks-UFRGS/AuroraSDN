{% extends "sdn/base-content.html" %}
{% load url from future %}

{% block content %}
<div class="container first-container">
    <h1 class="logo">SDN Interactive Manager <sup><small>beta</small></sup></h1>
    <form class="form-signin" role="form" method="post" action="{% url 'django.contrib.auth.views.login' %}">
        {% csrf_token %}
        <h2>Login</h2>
        {% if form.errors %}
          <p class="text-error">Your username and password didn't match. Please try again.</p>
        {% endif %}
        <div class="form-group">
            <input name="username" type="text" class="form-control" placeholder="Username">
        </div>
        <div class="form-group">
            <input name="password" type="password" class="form-control" placeholder="Password">
        </div>
        <div class="form-group">
          <button class="btn btn-primary" type="submit">Login</button>
        </div>
        <input type="hidden" name="next" value="{{ next }}" />
        <!--<a class="btn btn-block btn-google" href="{% url "social:begin" "google-oauth2" %}"><i class="icon-google"></i> Sign in with Google</a>-->
        <!--<a class="btn btn-block btn-facebook" href="{% url "social:begin" "facebook" %}"><i class="icon-facebook"></i> Sign in with Facebook</a>-->
    </form>
</div>
<!-- Google+ sign in 
        <span id="signinButton">
          <span
            class="g-signin"
            data-redirecturi="postmessage"
            data-accesstype="offline"
            data-callback="signinCallback"
            data-clientid="848614648179.apps.googleusercontent.com"
            data-cookiepolicy="single_host_origin"
            data-requestvisibleactions="http://schema.org/AddAction"
            data-scope="https://www.googleapis.com/auth/plus.login"
            data-width="wide">
          </span>
        </span>
<script type="text/javascript">
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/client:plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();

    function signinCallback(authResult) {
        if (authResult['status']['signed_in']) {
            // Update the app to reflect a signed in user
            // Hide the sign-in button now that the user is authorized, for example:
            console.log(authResult);
            $('#code').attr('value', authResult['code']);
            $('#at').attr('value', authResult['access_token']);
            $('#google-plus').submit();
            //document.getElementById('signinButton').setAttribute('style', 'display: none');
        } else {
            // Update the app to reflect a signed out user
            // Possible error values:
            //   "user_signed_out" - User is signed-out
            //   "access_denied" - User denied access to your app
            //   "immediate_failed" - Could not automatically log in the user
            console.log('Sign-in state: ' + authResult['error']);
        }
    }
</script>
<form id="google-plus" method="post" action="{% url 'social:complete' "google-plus" %}">{% csrf_token %}
    <input id="at" type="hidden" name="access_token" value="" />
    <input id="code" type="hidden" name="code" value="" />
</form>
-->
{% endblock %}
